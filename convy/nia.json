const admin = require('firebase-admin');
const fs = require('fs');

// You should replace './path/to/serviceAccountKey.json' with your own Firebase private key
let serviceAccount = require('./teenai-integration-dev-firebase-adminsdk-9o8l9-1bd99f9697.json');

admin.initializeApp({
    credential: admin.credential.cert(serviceAccount)
});

let db = admin.firestore();

let collectionRef = db.collection('NFCUserProfile');
let documents = collectionRef.get()
    .then(snapshot => {
        let data = {};
        snapshot.forEach(doc => {
            data[doc.id] = doc.data();
        });

        // Save to a JSON file
        fs.writeFileSync('firestore-export.json', JSON.stringify(data, null, 2));
    })
    .catch(err => {
        console.log('Error getting documents', err);
    });
